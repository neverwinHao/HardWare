C51 COMPILER V9.54   JQ8900                                                                05/23/2023 15:57:19 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE JQ8900
OBJECT MODULE PLACED IN .\Objects\jq8900.obj
COMPILER INVOKED BY: D:\keli5\C51\BIN\C51.EXE jq8900.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\jq89
                    -00.lst) OBJECT(.\Objects\jq8900.obj)

line level    source

   1          #include "jq8900.h"
   2          
   3          sbit sda = P1 ^ 0;
   4          
   5          uchar key_scan();
   6          uchar song;
   7          
   8          // 延时子函数
   9          void Delay1500us()              //@11.0592MHz
  10          {
  11   1              unsigned char i, j;
  12   1      
  13   1              _nop_();
  14   1              i = 17;
  15   1              j = 31;
  16   1              do
  17   1              {
  18   2                      while (--j);
  19   2              } while (--i);
  20   1      }
  21          
  22          // 延时子函数
  23          void Delay500us()               //@11.0592MHz
  24          {
  25   1              unsigned char i, j;
  26   1      
  27   1              _nop_();
  28   1              _nop_();
  29   1              i = 6;
  30   1              j = 93;
  31   1              do
  32   1              {
  33   2                      while (--j);
  34   2              } while (--i);
  35   1      }
  36          
  37          // 延时子函数
  38          void Delay2ms()         //@11.0592MHz
  39          {
  40   1              unsigned char i, j;
  41   1      
  42   1              _nop_();
  43   1              _nop_();
  44   1              i = 22;
  45   1              j = 128;
  46   1              do
  47   1              {
  48   2                      while (--j);
  49   2              } while (--i);
  50   1      }
  51          
  52          // 延时子函数
  53          void Delay4ms()         //@11.0592MHz
  54          {
C51 COMPILER V9.54   JQ8900                                                                05/23/2023 15:57:19 PAGE 2   

  55   1              unsigned char i, j;
  56   1      
  57   1              _nop_();
  58   1              i = 44;
  59   1              j = 4;
  60   1              do
  61   1              {
  62   2                      while (--j);
  63   2              } while (--i);
  64   1      }
  65          
  66          // 以一线通信向jq8900发送指令
  67          // 常见指令 0x11：重复播放
  68          // 0x13：结束播放 0x0a：清除数字 0x0b：选曲确认
  69          void SendData(uint addr) // 发 送 函 数
  70          {
  71   1                      int i = 0;
  72   1                      EA = 0; //发 送 时 关 掉 中 断 ， 防 止 中 断 影 响 时 序 
  73   1                      sda = 1;//开 始 拉 高
  74   1                      Delay2ms();
  75   1                      sda = 0; //开 始 引 导 码 
  76   1                      Delay4ms(); //此 处 延 时 最 少 要 大 于 2 m s ， 此参数延 时 为 3 1 0 m s 
  77   1                      for( i=0;i<8;i++) //总 共 8 位 数 据 
  78   1                      {
  79   2                                      sda = 1;
  80   2                                      if(addr & 0x01) //3 : 1 表 示 数 据 位 1 , 每 个位 用 两 个 脉 冲 表 示 
  81   2                                      {
  82   3                                                      Delay1500us();
  83   3                                                      sda = 0 ;
  84   3                                                      Delay500us();
  85   3                                      }
  86   2                                      else //1 ： 3 表 示 数 据 位 0 , 每个 位 用 两 个 脉 冲 表 示 
  87   2                                      {
  88   3                                                      Delay500us();
  89   3                                                      sda = 0;
  90   3                                                      Delay1500us();
  91   3                                      }
  92   2                                      addr >>= 1;
  93   2                      }
  94   1                      sda = 1 ;
  95   1                      EA = 1 ; //恢 复 中 断
  96   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    108    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
